<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown 編輯器</title>
    <link rel="icon" href="icon.png" type="image/png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="toolbar">
    <div class="header-left">
        <img src="icon.png" alt="Logo" class="app-logo" onerror="this.style.display='none'">
        <h1>Markdown 編輯器</h1>
    </div>

    <div class="toolbar-groups">
        <!-- 歷史紀錄 -->
        <div class="tool-group">
            <button id="undo-btn" title="上一步 (Ctrl+Z)"><i class="fas fa-undo"></i></button>
            <button id="redo-btn" title="下一步 (Ctrl+Y)"><i class="fas fa-redo"></i></button>
        </div>

        <!-- 搜尋與編輯 -->
        <div class="tool-group">
            <button id="toggle-search-btn" title="搜尋與取代"><i class="fas fa-search"></i> 搜尋</button>
            <button id="clear-btn" title="清空"><i class="fas fa-trash"></i></button>
        </div>

        <!-- 檔案操作 -->
        <div class="tool-group">
            <select id="encoding-select" title="檔案編碼">
                <option value="UTF-8" selected>UTF-8</option>
                <option value="Big5">Big5 (繁中)</option>
                <option value="Shift_JIS">Shift_JIS (日文)</option>
                <option value="GBK">GBK (簡中)</option>
            </select>
            <button id="open-file-btn" title="從本地開啟"><i class="fas fa-folder-open"></i> 開啟</button>
            <button id="save-file-btn" title="保存到本地"><i class="fas fa-save"></i> 儲存</button>
        </div>
    </div>
</header>

<!-- 搜尋取代列 -->
<div id="search-bar" class="search-bar">
    <input type="text" id="search-input" placeholder="尋找目標...">
    <input type="text" id="replace-input" placeholder="取代為...">
    <button id="find-next-btn">尋找下一個</button>
    <button id="replace-all-btn">全部取代</button>
    <button id="close-search-btn" class="close-btn">✕</button>
</div>

<input type="file" id="file-input-element" accept=".md,.txt,.markdown">

<div class="main-container">
    <div id="editor-container">
        <textarea id="source-input" placeholder="在此輸入 Markdown..."></textarea>
    </div>
    <div id="preview-container" class="markdown-body"></div>
</div>

<!-- 狀態列 (新增字數統計) -->
<div id="status-bar">
    <span id="word-count-display">字數: 0</span>
</div>

<!-- 函式庫 -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<!-- 主程式 -->
<script type="module" src="js/main.js"></script>

</body>
</html>
